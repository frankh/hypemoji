(this.webpackJsonphypemoji=this.webpackJsonphypemoji||[]).push([[0],{121:function(e,t,n){},122:function(e,t,n){},143:function(e,t){},145:function(e,t){},266:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(113),i=n.n(s),o=(n(121),n(47)),c=n(3),u=n(28),l=n(4),p=n(5),h=n(0),m=n(10),b=n(9),d=(n(122),n(116)),f=n(45),g=n.n(f),j=n(115),x=n(46),v=n(8),y=function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).framesChange=function(e){var t=parseInt(e.target.value);(t<=0||!t)&&(t=10),a.setState({frames:t})},a.delayChange=function(e){var t=parseInt(e.target.value);t<=0&&(t=1),a.setState({delay:t})},a.rainbowChange=function(e){var t=e.target.checked;a.setState({rainbow:t})},a.regenerate=function(e){return e.preventDefault(),a.onDrop(a.state.images),!1},a.state={images:[],previews:[],frames:10,delay:10,rainbow:!1,progresses:[]},a.onDrop=a.onDrop.bind(Object(h.a)(a)),document.onpaste=function(e){for(var t=e.clipboardData.items,n=0;n<t.length;n++)if(0===t[n].type.indexOf("image")){var r=t[n].getAsFile();a.onDrop([r])}},a}return Object(p.a)(n,[{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"onDrop",value:function(e){var t=this;this.setState({images:e,progresses:e.map((function(){return 0}))}),setTimeout((function(){Promise.all(e.map((function(e,n){return t.hypify(n,e,t.state.frames,t.state.delay)}))).then((function(e){t.setState({previews:e}),t.setState({progresses:[]})}))}))}},{key:"progress",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.state.progresses)[t]=n,this.setState({progresses:a}),e.next=5,this.sleep(1);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"hypify",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n,a,r){var s,i,o,u,l,p,h,m,b,d,f,j,v,y,O;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Hypifying with ".concat(a," frames and ").concat(r," delay")),s=[],e.next=4,this.progress(t,0);case 4:return e.t0=g.a,e.next=7,n.arrayBuffer();case 7:return e.t1=e.sent,e.next=10,e.t0.read.call(e.t0,e.t1);case 10:return(i=e.sent).resize(1,1),o=i.getPixelColor(0,0),e.next=15,this.progress(t,.05);case 15:return e.t2=g.a,e.next=18,n.arrayBuffer();case 18:return e.t3=e.sent,e.next=21,e.t2.read.call(e.t2,e.t3);case 21:return((u=e.sent).getWidth()>=128||u.getHeight()>=128)&&u.scaleToFit(128,128),l=g.a.intToRGBA(o),p=l.r,h=l.g,m=l.b,Math.max(p,h,m)-Math.min(p,h,m)<30&&(console.log("not vibrant enough, adding red"),u.color([{apply:"red",params:[100]}])),e.next=27,this.progress(t,.07);case 27:b=u.getWidth(),d=u.getHeight(),f=0;case 29:if(!(f<a)){e.next=43;break}return j=new x.GifFrame(b,d,{delayCentisecs:r}),s.push(j),v=360/a,this.state.rainbow||(v*=f),u.color([{apply:"hue",params:[v]}]),j.bitmap.data=u.bitmap.data.slice(),e.next=38,u.getBase64Async("image/png");case 38:return e.next=40,this.progress(t,(f+1)/a);case 40:f++,e.next=29;break;case 43:return y=new x.GifCodec,x.GifUtil.quantizeDekker(s),e.next=47,y.encodeGif(s,{loops:0});case 47:return O=e.sent,e.next=50,this.progress(t,1);case 50:return e.abrupt("return","data:image/gif;base64,"+btoa(String.fromCharCode.apply(null,O.buffer)));case 51:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"header",children:Object(v.jsx)("h1",{children:"Hypemoji"})}),Object(v.jsxs)("div",{onPaste:this.onPaste,children:[this.state.previews.length>0?Object(v.jsxs)("form",{children:[Object(v.jsxs)("label",{children:["Number of Frames:",Object(v.jsx)("input",{type:"number",name:"frames",min:"2",max:"100",placeholder:"10",onChange:this.framesChange})]}),Object(v.jsxs)("label",{children:["Frame delay (in centiseconds):",Object(v.jsx)("input",{type:"number",name:"delay",min:"2",placeholder:"10",onChange:this.delayChange})]}),Object(v.jsxs)("label",{children:["Rainbow:",Object(v.jsx)("input",{type:"checkbox",name:"rainbow",onChange:this.rainbowChange})]}),Object(v.jsx)("button",{type:"submit",name:"submit",onClick:this.regenerate,children:"Regenerate"})]}):null,Object(v.jsx)(d.a,{onDrop:this.onDrop,multiple:!0,children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object(v.jsxs)("div",Object(o.a)(Object(o.a)({className:"dropzone"},t()),{},{children:[Object(v.jsx)("p",{children:"Drag image here, paste from clipboard, or click to select"}),Object(v.jsx)("input",Object(o.a)({},n()))]}))}}),Object(v.jsxs)("div",{className:"result",children:[(this.state.progresses||[]).map((function(e,t){return Object(v.jsx)(j.a,{percent:100*e},"line_".concat(t))})),this.state.previews.map((function(t,n){return Object(v.jsx)("a",{href:t,download:"".concat(e.state.images[n].name.split(".").slice(0,-1).join(".")),children:Object(v.jsx)("img",{alt:"hype emoji",src:t})},"image-".concat(n))}))]})]})]})}}]),n}(r.a.Component),O=y;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(v.jsx)(O,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[266,1,2]]]);
//# sourceMappingURL=main.e53fd0d5.chunk.js.map